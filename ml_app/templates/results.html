{% load static %}
<!DOCTYPE html>
<html>
<head>
    <title>Resultados</title>
    <link rel="stylesheet" href="{% static 'css/style.css' %}">
    {% load static %}
    <link rel="stylesheet" href="{% static 'css/styles.css' %}">

</head>
<body>

    <h1>Resultados del proyecto </h1>

{% if table %}
<h2>Vista previa del Dataset</h2>

<div class="table-container">
    {{ table|safe }}
</div>
{% endif %}
{% load static %}

<h3>Matriz de correlación</h3>
<img src="{% static corr_img %}" alt="Matriz de correlación">

<h3>Distribución del protocolo</h3>
<img src="{% static protocol_img %}" alt="Distribución del protocolo">

<div class="container">

    {% if plot_url %}
    <div class="card">
        <h3>Distribución del protocolo</h3>
        <img src="{{ plot_url }}" alt="Gráfica protocol_type">
    </div>
    {% endif %}
    <h1>Resultados Finales</h1>

    <div class="card">
        <p class="stat"><strong>Accuracy:</strong> {{ accuracy }}%</p>
    </div>
{% if protocol_data %}
<div class="card">
    <h3>Conteo de Protocolos</h3>

    <div class="table-container">
        <table class="data-table">
            <thead>
                <tr>
                    <th>Protocolo</th>
                    <th>Cantidad</th>
                </tr>
            </thead>
            <tbody>
                {% for protocol, count in protocol_data %}
                <tr>
                    <td>{{ protocol }}</td>
                    <td>{{ count }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>
{% endif %}
{% if class_data %}
<div class="card">
    <h3>Distribución de Clases</h3>

    <div class="table-container">
        <table class="data-table">
            <thead>
                <tr>
                    <th>Clase</th>
                    <th>Cantidad</th>
                </tr>
            </thead>
            <tbody>
                {% for label, count in class_data %}
                <tr>
                    <td>{{ label }}</td>
                    <td>{{ count }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>
{% endif %}


    <div class="card">
        <h3>Distribución del Dataset</h3>
        <ul>
            <li><strong>Total de registros:</strong> {{ total_size }}</li>
            <li><strong>Train set:</strong> {{ train_size }}</li>
            <li><strong>Validation set:</strong> {{ val_size }}</li>
            <li><strong>Test set:</strong> {{ test_size }}</li>
            <li><strong>Validation Accuracy:</strong> {{ val_accuracy }}%</li>
        </ul>
    </div>


</div>
<table>
    <tr>
        <th>Clase</th>
        <th>Precisión</th>
        <th>Recall</th>
        <th>F1-Score</th>
        <th>Soporte</th>
    </tr>

    {% for label, metrics in report.items %}
    <tr>
        <td>{{ label }}</td>
        <td>{{ metrics.precision }}</td>
        <td>{{ metrics.recall }}</td>
        <td>{{ metrics.f1_score }}</td>
        <td>{{ metrics.support }}</td>
    </tr>
    {% endfor %}
</table>

</body>
</html>